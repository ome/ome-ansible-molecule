name: Molecule action
description: Run Molecule to test Ansible roles
author: Robert de Bock <robert@meinit.nl>

inputs:
  namespace:
    description: The Docker Hub namespace where the image is in.
    required: false
    default: robertdebock
  image:
    description: The image you want to run on.
    required: false
    default: fedora
  tag:
    description: The tag of the container image to use.
    required: false
    default: latest
 
runs:
  using: docker
  image: 'docker://robertdebock/github-action-molecule'
  args:
    - cd ${GITHUB_REPOSITORY}
    - test -f tox.ini && tox || molecule test
  env:
    namespace: ${{ inputs.namespace }}
    image: ${{ inputs.image }}
    tag: ${{ inputs.tag }}

branding:
  icon: play  
  color: green

